{"version":3,"sources":["request.js","PersonForm.js","NumberBook.js","index.js"],"names":["basicUrl","axios","get","then","res","data","changedObj","post","id","delete","person","put","PersonForm","persons","setPersons","setErrorMessage","setExtraClass","useState","newName","setNewName","newPhoneNumber","setNewPhoneNumber","onSubmit","e","preventDefault","alert","personCheckIndex","findIndex","a","name","window","confirm","PersonRequest","number","console","log","jsonStr","JSON","stringify","target","parse","newPerson","concat","setTimeout","value","onChange","type","NumberBook","map","onClick","filter","p","catch","onDeletePerson","Notification","message","extraClass","className","Filter","filterValue","setFilterValue","newFilterValue","App","errorMessage","useEffect","toLowerCase","includes","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.89f9e10b.chunk.js","sourcesContent":["\nimport axios from 'axios';\nconst basicUrl = '/api'\n\nconst getAllPersons = () => axios.get(`${basicUrl}/persons`).then(res => res.data);\nconst createPerson = ( changedObj ) => {\n  const request = axios.post(`${basicUrl}/persons`, changedObj);\n  return request.then(res => res.data);\n}\nconst deletePerson = (id) => {\n  return axios.delete(`${basicUrl}/persons/${id}`);\n}\nconst updatePerson = (id, person) => {\n  return axios.put(`${basicUrl}/persons/${id}`, person).then(res => res.data);\n}\n\n\nexport default { \n  getAllPersons, \n  createPerson,\n  deletePerson,\n  updatePerson\n}","import React, { useState } from 'react'\nimport PersonRequest from './request';\n\nconst PersonForm = ({ persons, setPersons, setErrorMessage, setExtraClass }) => {\n  const [ newName, setNewName ] = useState('')\n  const [ newPhoneNumber, setNewPhoneNumber] = useState('');\n\n  const onNameChange = e =>{\n    e.preventDefault(); \n    setNewName(e.target.value)\n  }\n  const onPhoneChange = e =>{\n    e.preventDefault(); \n    setNewPhoneNumber(e.target.value)\n  }\n  const submitAction = ( e ) => {\n    e.preventDefault(); \n    if(!newName ) return alert('Please input name');\n    if(!newPhoneNumber ) return alert('Please input phone number  ');\n    const personCheckIndex = persons.findIndex( a => a.name === newName)\n    if( personCheckIndex !== -1 ){\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n        PersonRequest\n          .updatePerson( personCheckIndex + 1, { ...persons[personCheckIndex], number: newPhoneNumber})\n          .then((res)=> {\n            console.log('res: ', res);\n            const jsonStr = JSON.stringify(persons);\n            const target = JSON.parse(jsonStr);\n            target[personCheckIndex] = res;\n            setPersons(target);\n            setNewName('');\n            setNewPhoneNumber('');\n          });\n      }\n    }else {\n      PersonRequest.createPerson({ name: newName, number: newPhoneNumber })\n      .then((newPerson)=> {\n        setPersons(persons.concat(newPerson));\n        setNewName('');\n        setNewPhoneNumber('');\n        setExtraClass('success');\n        setErrorMessage(`Added ${newPerson.name}`);\n        setTimeout(()=>{\n          setErrorMessage(null);\n          setExtraClass('');\n        }, 5000);\n      })\n    }\n  }\n  return (\n    <form onSubmit={submitAction}>\n      <div> name: <input value={ newName } onChange={ onNameChange } /></div>\n      <div>number: <input value={ newPhoneNumber } onChange={ onPhoneChange } /></div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm;\n","import React from 'react'\nimport PersonRequest from './request';\n\n\nconst NumberBook = ({ persons, setPersons, setErrorMessage }) => {\n  const onDeletePerson = (person) => {\n    if(window.confirm(`Delete ${person.name} ?`)){\n      PersonRequest\n        .deletePerson(person.id)\n        .then(()=>{\n          setPersons(persons.filter(p => p.id !== person.id));\n        })\n        .catch((res)=>{\n          console.log('res: ', res);\n          setErrorMessage(`Imformation of ${person.name} is already been removed from server`);\n          setTimeout(()=>{\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  }\n\n  return persons.map(person=> \n    (\n      <div key={person.name}>\n        <span>{ person.name } </span>  \n        <span>{ person.number } </span>  \n        <button onClick={()=> onDeletePerson(person)}>delete</button>\n      </div>\n    )\n  );\n}\n\nexport default NumberBook;","import React, { useEffect, useState } from 'react'\nimport ReactDOM from 'react-dom'\nimport PersonRequest from './request';\nimport PersonForm from './PersonForm';\nimport NumberBook from './NumberBook';\nimport './index.css';\n\nconst Notification = ({ message, extraClass }) => {\n  if (message === null || !message) {\n    return null\n  }\n\n  return (\n    <div className={`basic ${extraClass}`}>\n      {message}\n    </div>\n  )\n}\n\nconst Filter = ({ filterValue, setFilterValue }) => {\n  const onFilterChange = e => {\n    e.preventDefault(); \n    const newFilterValue = e.target.value;\n    setFilterValue(newFilterValue);\n  }\n\n  return (\n    <div>\n      <span>filter shown with</span> \n      <input value={ filterValue } onChange={ onFilterChange } />\n    </div>\n  )\n};\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [ filterValue , setFilterValue ] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [extraClass, setExtraClass] = useState('');\n  useEffect(()=> {\n      PersonRequest.getAllPersons().then( persons => {\n        setPersons(persons);\n      });\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} extraClass={extraClass} />\n      <Filter filterValue={ filterValue } setFilterValue= {setFilterValue}/>\n      <h2>Add a new</h2>\n      <PersonForm  persons={persons}  setPersons={setPersons}  setErrorMessage={setErrorMessage} setExtraClass={setExtraClass}/>\n      <h2>Numbers</h2>\n      <NumberBook persons = { persons.filter( p => p.name.toLowerCase().includes(filterValue)) } setPersons={setPersons} setErrorMessage={setErrorMessage}/>\n    </div>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}