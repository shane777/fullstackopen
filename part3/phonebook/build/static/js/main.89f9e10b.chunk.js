(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(3),s=n(0),c=n(2),a=n(15),o=n.n(a),u=n(4),i=n.n(u),l="/api",j=function(){return i.a.get("".concat(l,"/persons")).then((function(e){return e.data}))},b=function(e){return i.a.post("".concat(l,"/persons"),e).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(l,"/persons/").concat(e))},f=function(e,t){return i.a.put("".concat(l,"/persons/").concat(e),t).then((function(e){return e.data}))},h=n(6),O=function(e){var t=e.persons,n=e.setPersons,a=e.setErrorMessage,o=e.setExtraClass,u=Object(c.useState)(""),i=Object(r.a)(u,2),l=i[0],j=i[1],d=Object(c.useState)(""),O=Object(r.a)(d,2),p=O[0],m=O[1];return Object(s.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!l)return alert("Please input name");if(!p)return alert("Please input phone number  ");var r=t.findIndex((function(e){return e.name===l}));-1!==r?window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))&&f(r+1,Object(h.a)(Object(h.a)({},t[r]),{},{number:p})).then((function(e){console.log("res: ",e);var s=JSON.stringify(t),c=JSON.parse(s);c[r]=e,n(c),j(""),m("")})):b({name:l,number:p}).then((function(e){n(t.concat(e)),j(""),m(""),o("success"),a("Added ".concat(e.name)),setTimeout((function(){a(null),o("")}),5e3)}))},children:[Object(s.jsxs)("div",{children:[" name: ",Object(s.jsx)("input",{value:l,onChange:function(e){e.preventDefault(),j(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:p,onChange:function(e){e.preventDefault(),m(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.persons,n=e.setPersons,r=e.setErrorMessage;return t.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{children:[e.name," "]}),Object(s.jsxs)("span",{children:[e.number," "]}),Object(s.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name," ?"))&&d(e.id).then((function(){n(t.filter((function(t){return t.id!==e.id})))})).catch((function(t){console.log("res: ",t),r("Imformation of ".concat(e.name," is already been removed from server")),setTimeout((function(){r(null)}),5e3)}))}(e)},children:"delete"})]},e.name)}))},m=(n(38),function(e){var t=e.message,n=e.extraClass;return null!==t&&t?Object(s.jsx)("div",{className:"basic ".concat(n),children:t}):null}),x=function(e){var t=e.filterValue,n=e.setFilterValue;return Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{children:"filter shown with"}),Object(s.jsx)("input",{value:t,onChange:function(e){e.preventDefault();var t=e.target.value;n(t)}})]})},v=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),u=Object(r.a)(o,2),i=u[0],l=u[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),f=d[0],h=d[1],v=Object(c.useState)(""),g=Object(r.a)(v,2),w=g[0],C=g[1];return Object(c.useEffect)((function(){j().then((function(e){a(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(m,{message:f,extraClass:w}),Object(s.jsx)(x,{filterValue:i,setFilterValue:l}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(O,{persons:n,setPersons:a,setErrorMessage:h,setExtraClass:C}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(p,{persons:n.filter((function(e){return e.name.toLowerCase().includes(i)})),setPersons:a,setErrorMessage:h})]})};o.a.render(Object(s.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.89f9e10b.chunk.js.map